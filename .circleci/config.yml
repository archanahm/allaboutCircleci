version: 2

jobs:
  checkout:
    working_directory: ~/td-qa
    docker:
      - image: circleci/python:3.9-rc
    steps:
      - run: echo checkout 
  build:
    working_directory: ~/td-qa
    docker:
      - image: circleci/python:3.9-rc
    steps:
      - run: echo build 
  deploy-master:
    working_directory: ~/td-qa
    docker:
      - image: circleci/python:3.9-rc
    steps:
      - run: echo deploy-master 
  deploy-dev:
    working_directory: ~/td-qa
    docker:
      - image: circleci/python:3.9-rc
    steps:
      - slack/notify:
          message: |
            Please check and approve Job to deploy.
            https://circleci.com/workflow-run/${CIRCLE_WORKFLOW_ID}
      - expiration/set:
          ttl: 100
orbs:
  expiration: azihsoyn/job-expiration@0.1.0
  
workflows:
  version: 2
  test-build-deploy:
    jobs:
      - checkout
      - deploy-dev:
          type: approval
          requires:
            - checkout
          filters:
            branches:
              ignore:
                - master
                
